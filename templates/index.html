<html>

<head>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script>
function jsonCallback(json){
  console.log(json);
  document.getElementById("content").innerHTML = JSON.stringify(json);
}
        function call() {
            $.ajax({
                type: 'GET',
                url: '/test_flask',
                dataType: 'json',
                contentType: "application/json",
                success: function (data) {
                    console.log("success from callback\n");
                    console.log(data)
                    document.getElementById("content").innerHTML = JSON.stringify(data);
					                    table6 = document.createElement('table');
                    table6.setAttribute("class", "table");
		    keys = [];
		    if(data.length > 0){
                    	keys = Object.keys(data[0]);
		    }
                    if (keys.length) {
                        var tr4 = document.createElement('tr');
                        table6.appendChild(tr4)
                        for (var i = 1; i <= keys.length; i++) {

                            var th4 = document.createElement('th')
                            var text4 = document.createTextNode(keys[i - 1])
                            th4.appendChild(text4)
                            //tr.appendChild(td)
                            tr4.appendChild(th4)

                        }

                        for (var j = 0; j < data.length; j++) {
                            tr_inner = document.createElement('tr');
                            for (var k = 0; k < keys.length; k++) {
                                td_inner = document.createElement('td');
                                text_inner = document.createTextNode(data[j][keys[k]]);
                                console.log(data[j][keys[k]]);
                                td_inner.appendChild(text_inner);
                                tr_inner.appendChild(td_inner);
                            }


                            table6.appendChild(tr_inner)
                        }
			document.body.appendChild(table6);                    }

                },
                // jsonpCallback: 'jsonCallback',
                error: function (e, r, h) {
                    alert(h.message);
                }
            })
        };
    </script>
</head>

<body>
  <style>
background-image: url('microsoft-oracle.png');
 </style>
	<div class="container"  >
        <div class="row">
            <div class="col-sm-12">
                <h1><button type="button" class="btn btn-outline-success" onclick="call()">GET ATP data</button></h1>
                <div>
                    <p class="lead" id="content">

                    </p>
                </div>
            </div>
        </div>
    </div>
 
</body>

</html>
